# =========================================================================
#  KUBERNETES SECRETS (SENSITIVE DATA)
# Stores sensitive data in Base64 encoding. Replace values with your actual secrets.
# =========================================================================
apiVersion: v1
kind: Secret
metadata:
  name: mern-app-secrets
  labels:
    app: mern-stack
type: Opaque
data:
  # Base64 encoded: Your JSON Web Token Secret
  # JWT Secret: 'eyJhbGciOiJIUzI1NiJ9.eyJSb2xlIjoiQWRtaW4iLCJJc3N1ZXIiOiJJc3N1ZXIiLCJVc2VybmFtZSI6IkphdmFJblVzZSIsImV4cCI6MTc0NDg2NjA3NCwiaWF0IjoxNzQ0ODY2MDc0fQ.fsUmxSXP_tEYjmV6d_-wcykDeLRUd2bThNEOBb7NhcU'
  jwt-secret: "ZXlqYWxjaU9pSko...R7NhcU"

  # Base64 encoded: MongoDB Root Password (Example: 'MongoRoot123!')
  mongo-root-password: "TW9uZ29Sb290MTIzIQ=="

  # Base64 encoded: MongoDB Root Username (Example: 'rootadmin')
  mongo-root-username: "cm9vdGFkbWlu"

---
# =========================================================================
#  KUBERNETES CONFIGMAP (NON-SENSITIVE CONFIGURATION)
# Stores application configuration accessible to all components.
# =========================================================================
apiVersion: v1
kind: ConfigMap
metadata:
  name: mern-app-config
  labels:
    app: mern-stack
data:
  # Backend and MongoDB Configuration
  db-name: foodmore
  backend-port: "5000"
  jwt-expires-in: "7d"
  node-env: "production" # Set to production mode for better performance/security

  # Connection String using the internal MongoDB Headless Service DNS
  mongo-uri: "mongodb://mongo-svc:27017/"

  # Frontend API URL uses the internal Backend Service DNS
  frontend-api-url: "http://backend-service:5000/api"
